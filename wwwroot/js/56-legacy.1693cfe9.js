"use strict";(self["webpackChunkvue2a_test"]=self["webpackChunkvue2a_test"]||[]).push([[56],{615:function(t,e,n){n.d(e,{h:function(){return i}});n(1249);var a=n(8262),i=(0,a.Q_)("main",{state:function(){return{count:10,drawer:!1,openFilter:!1,menuSelectedItem:0,menuItems:[],menuVisible:!0}},getters:{double:function(t){return 2*t.count}},actions:{increment:function(){this.count++},clearItem:function(){this.menuItems=[],this.menuVisible=!1},addItem:function(t){var e=this;this.menuItems=[],t.map((function(t){e.menuItems.push(t)})),this.menuSelectedItem=0,this.menuVisible=!0}}})},4056:function(t,e,n){n.r(e),n.d(e,{default:function(){return E}});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("v-dialog",{attrs:{persistent:""},model:{value:t.store.openFilter,callback:function(e){t.$set(t.store,"openFilter",e)},expression:"store.openFilter"}},[n("v-card",[n("v-card-title",[t._v("Фильтровка и сортировка")]),n("div",{staticStyle:{height:"60vh",maxheight:"60vh",overflow:"auto"}},[t.load?t._e():n("v-simple-table",{attrs:{dense:"",light:""},scopedSlots:t._u([{key:"default",fn:function(){return[n("tbody",t._l(t.OpenMapData().Fcols,(function(e,a){return n("tr",{key:e.FieldName,staticStyle:{"background-color":"white"}},[n("td",{staticStyle:{"border-bottom":"none"}},[n("v-text-field",{attrs:{label:e.FieldCaption,"append-icon":t.getIcon(e)},on:{"click:append":function(n){return t.sortChangeIndex(e,a)}},model:{value:e.FindString,callback:function(n){t.$set(e,"FindString",n)},expression:"column.FindString"}})],1),n("td",{staticStyle:{"border-bottom":"none",width:"50px"}},[t._v(" "+t._s(e.SortOrder)+" "),n("span",{attrs:{hidden:""}},[t._v(t._s(t.rangSort))]),n("span",{attrs:{hidden:""}},[t._v(t._s(t.nactord))])])])})),0)]},proxy:!0}],null,!1,283315501)})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){return t.updateTab()}}},[t._v("ОК")]),n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.store.openFilter=!1}}},[t._v("Отмена")])],1)],1)],1),n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[t._v("Справочник контактов")]),t.load?n("v-toolbar-title",[t._v("(загрузка...)")]):t._e(),n("v-spacer"),n("v-spacer"),n("v-spacer"),t.load?t._e():n("v-text-field",{attrs:{label:"Поиск",dense:"",filled:"",rounded:"","hide-details":"","prepend-inner-icon":"mdi-magnify","single-line":""},on:{input:function(e){return t.updateTab()}},model:{value:t.OpenMapData().Fcols[3].FindString,callback:function(e){t.$set(t.OpenMapData().Fcols[3],"FindString",e)},expression:"OpenMapData().Fcols[3].FindString"}})],1),t.load?t._e():n("v-simple-table",{attrs:{light:""},scopedSlots:t._u([{key:"default",fn:function(){return[n("tbody",t._l(t.OpenMapData().MainTab,(function(e,a){return n("tr",{key:a},[n("td",[n("v-list-item-avatar",[n("v-img",{attrs:{src:t.avatar(a)}})],1)],1),n("td",[n("v-card",{staticClass:"mx-auto",attrs:{tile:"",flat:"","max-width":"400"}},[n("v-list-item",{attrs:{dense:""}},[n("v-list-item-content",[n("v-list-item-subtitle",[t._v(t._s(e["Должность"]))]),n("v-list-item-title",{staticClass:"caption"},[t._v(t._s(e["ПолнИмяСотрудника"]))])],1)],1),n("v-list-item",{attrs:{dense:""}},[n("v-list-item-content",[n("v-list-item-subtitle",[t._v("Табельный номер")]),n("v-list-item-title",{staticClass:"caption"},[t._v(t._s(e["ТабN"]))])],1)],1)],1)],1),n("td",[n("v-card",{staticClass:"mx-auto",attrs:{tile:"",flat:"","max-width":"300"}},[n("v-list-item",{attrs:{dense:""}},[n("v-list-item-content",[n("v-list-item-subtitle",[t._v("Компания")]),n("v-list-item-title",{staticClass:"caption"},[t._v(t._s(e["Организация"]))])],1)],1),n("v-list-item",{attrs:{dense:""}},[n("v-list-item-content",[n("v-list-item-subtitle",[t._v("Подразделение")]),n("v-list-item-title",{staticClass:"caption"},[t._v(t._s(e["Подразделение"]))])],1)],1)],1)],1),n("td",[n("v-card",{staticClass:"mx-auto",attrs:{tile:"",flat:"","max-width":"300"}},[n("v-list-item",{attrs:{dense:""}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-home")])],1),n("v-list-item-content",[n("v-list-item-subtitle",[t._v(t._s(e["ОфисСотрудника"]))])],1)],1),n("v-list-item",{attrs:{dense:""}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-phone")])],1),n("v-list-item-content",[n("v-list-item-subtitle",[t._v(t._s(e["CorpMobile"]))])],1)],1),n("v-list-item",{attrs:{dense:""}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-email-outline")])],1),n("v-list-item-content",[n("v-list-item-subtitle",[t._v(t._s(e["Email"]))])],1)],1)],1)],1)])})),0)]},proxy:!0}],null,!1,143399415)}),t.load?t._e():n("Pagination",{attrs:{findData:t.OpenMapData()}})],1)},i=[],r=n(6198),o=(n(5666),n(1249),n(1539),n(9714),n(4916),n(4723),n(6977),n(9653),n(5306),n(8862),n(615)),s=n(5767),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-toolbar",{attrs:{flat:"",dense:""}},[n("span",{attrs:{hidden:""}},[t._v(t._s(t.$parent.action))]),n("v-btn",{attrs:{icon:"",disabled:0===t.page()},on:{click:function(e){return t.$parent.onChangePage(0)}}},[n("v-icon",[t._v("mdi-page-first")])],1),n("v-btn",{attrs:{icon:"",disabled:0===t.page()},on:{click:function(e){t.$parent.onChangePage(t.page()-1)}}},[n("v-icon",[t._v("mdi-chevron-left")])],1),t._v(" "+t._s(t.page()+1)+" из "+t._s(Math.max(0,Math.ceil(t.count()/t.nrows())-1)+1)+" "),n("v-btn",{attrs:{icon:"",disabled:t.page()>=Math.ceil(t.count()/t.nrows())-1},on:{click:function(e){t.$parent.onChangePage(t.page()+1)}}},[n("v-icon",[t._v("mdi-chevron-right")])],1),n("v-btn",{attrs:{icon:"",disabled:t.page()>=Math.ceil(t.count()/t.nrows())-1},on:{click:function(e){t.$parent.onChangePage(Math.max(0,Math.ceil(t.count()/t.nrows())-1))}}},[n("v-icon",[t._v("mdi-page-last")])],1),n("v-spacer"),t._v(" "+t._s(t.page()*t.nrows()+1)+" - "+t._s(Math.min((t.page()+1)*t.nrows(),t.count()))+" из "+t._s(t.count())+" ")],1)},l=[],u={name:"PaginationTool",data:function(){return{rowsPerPage:30}},props:{findData:Object},methods:{OpenMapData:function(){return this.findData},count:function(){return this.OpenMapData().TotalTab?this.OpenMapData().TotalTab[0].n_total:0},page:function(){return this.OpenMapData().page?this.OpenMapData().page-1:0},nrows:function(){return this.OpenMapData().nrows?this.OpenMapData().nrows:30}}},d=u,p=n(1001),m=n(3453),v=n.n(m),h=n(680),f=n(6428),g=n(3631),b=n(6656),_=(0,p.Z)(d,c,l,!1,null,null,null),S=_.exports;v()(_,{VBtn:h.Z,VIcon:f.Z,VSpacer:g.Z,VToolbar:b.Z});var x={name:"UserPage",components:{Pagination:S},setup:function(){var t=(0,o.h)();return{store:t}},data:function(){return{load:!0,tableData:{},updating:!1,action:1,stateDrawer:!1,rangSort:0,nactord:1}},methods:{sortChange:function(t,e){var n=0,a=this.OpenMapData().Fcols;a.map((function(t,a){"Нет"==t.Sort&&(t.SortOrder=null),a!=e&&t.SortOrder&&t.SortOrder>n&&(n=t.SortOrder)})),a[e].SortOrder=n+1,this.rangSort=n+1,this.nactord=this.nactord+1},sortChangeIndex:function(t,e){"ASC"==t.Sort?t.Sort="DESC":"DESC"==t.Sort?t.Sort="Нет":t.Sort="ASC",this.sortChange(null,e)},getIcon:function(t){return"ASC"==t.Sort?"mdi-arrow-down":"DESC"==t.Sort?"mdi-arrow-up":"mdi-sort"},OpenMapData:function(){return this.tableData},avatar:function(t){return"https://randomuser.me/api/portraits/women/"+t.toString()+".jpg"},dateformat:function(t,e){if(!t)return t;if(24!=t.length){var n=e.match(/0\.(0+)/),a=0;return n&&n.length>1&&(a=n[1].length),a>0?Number(t.toString()).toFixed(a):t}return e=e.replace("yyyy",t.substr(0,4)),e=e.replace("yy",t.substr(2,2)),e=e.replace("MM",t.substr(5,2)),e=e.replace("dd",t.substr(8,2)),e=e.replace("HH",t.substr(11,2)),e=e.replace("mm",t.substr(14,2)),e},onChangePage:function(t){this.action=this.action+1,this.OpenMapData().page=t+1,this.updateTab()},updateTab:function(){var t=(0,r.Z)(regeneratorRuntime.mark((function t(){var e,n,a,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=s.FH+"React/FinderStart",n=new FormData,a=this.OpenMapData(),n.append("id",1467),n.append("mode","data"),n.append("page",a.page.toString()),n.append("Fc",JSON.stringify(a.Fcols)),a.SQLParams&&n.append("SQLParams",JSON.stringify(a.SQLParams)),a.TextParams&&n.append("TextParams",JSON.stringify(a.TextParams)),t.next=11,fetch(e,{method:"POST",mode:s.W6?"no-cors":"cors",cache:"no-cache",credentials:s.W6?"include":"omit",body:n});case 11:return i=t.sent,t.next=14,i.json();case 14:r=t.sent,r.Error?alert(r.Error):(a.MainTab=r.MainTab,a.TotalTab=r.TotalTab,a.page=r.page,this.store.openFilter=!1);case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},computed:{gridHeight:function(){return document.documentElement.clientHeight-120}},mounted:function(){var t=(0,r.Z)(regeneratorRuntime.mark((function t(){var e,n,a,i,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=s.FH+"React/FinderStart",n=new FormData,n.append("id",1467),n.append("mode","data"),t.next=6,fetch(e,{method:"POST",mode:s.W6?"no-cors":"cors",cache:"no-cache",credentials:s.W6?"include":"omit",body:n});case 6:return a=t.sent,t.next=9,a.json();case 9:this.tableData=t.sent,this.tableData.Error?alert(this.tableData.Error):(i=[{text:"Фильтры",icon:"mdi-filter-menu",action:function(){r.store.openFilter=!0}}],this.store.addItem(i),this.load=!1);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},w=x,D=n(3237),C=n(7118),F=n(4497),M=n(7047),O=n(7620),T=n(5457),y=n(1317),V=n(459),k=n(3568),I=n(5978),Z=n(7921),P=(0,p.Z)(w,a,i,!1,null,null,null),E=P.exports;v()(P,{VBtn:h.Z,VCard:D.Z,VCardActions:C.h7,VCardTitle:C.EB,VDialog:F.Z,VIcon:f.Z,VImg:M.Z,VListItem:O.Z,VListItemAvatar:T.Z,VListItemContent:y.km,VListItemIcon:V.Z,VListItemSubtitle:y.oZ,VListItemTitle:y.V9,VSimpleTable:k.Z,VSpacer:g.Z,VTextField:I.Z,VToolbar:b.Z,VToolbarTitle:Z.qW})}}]);
//# sourceMappingURL=56-legacy.1693cfe9.js.map