(function(){"use strict";var t={5767:function(t,e,n){n.d(e,{FH:function(){return D},uW:function(){return S},RX:function(){return _},M8:function(){return k},W6:function(){return F}});var i=n(144),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("router-view")],1)},o=[],r={name:"AppMain",data:()=>({mainObj:S})},s=r,l=n(1001),c=(0,l.Z)(s,a,o,!1,null,null,null),d=c.exports,u=n(8345);i.Z.use(u.Z);const p=[{path:"/",component:()=>n.e(565).then(n.bind(n,1565)),children:[{path:"",component:()=>n.e(167).then(n.bind(n,167)),children:[{path:"",component:()=>Promise.all([n.e(377),n.e(524)]).then(n.bind(n,6569))},{path:"account",component:()=>n.e(167).then(n.bind(n,167)),children:[{path:"",component:()=>Promise.all([n.e(377),n.e(524)]).then(n.bind(n,6569))},{path:"user",component:()=>n.e(56).then(n.bind(n,4056))},{path:"company",component:()=>Promise.all([n.e(377),n.e(94)]).then(n.bind(n,479))},{path:"customer",component:()=>Promise.all([n.e(377),n.e(23)]).then(n.bind(n,1793))},{path:"finder",component:()=>Promise.all([n.e(377),n.e(857)]).then(n.bind(n,3615))},{path:"usercust",component:()=>Promise.all([n.e(377),n.e(524)]).then(n.bind(n,6569))},{path:"problems",component:()=>Promise.all([n.e(377),n.e(34)]).then(n.bind(n,5636))},{path:"journal",component:()=>Promise.all([n.e(377),n.e(241)]).then(n.bind(n,8082))}]}]},{path:"dct",component:()=>n.e(257).then(n.bind(n,9257))},{path:"managment",component:()=>n.e(233).then(n.bind(n,3233))}]}],m=new u.Z({mode:"hash",base:"/",routes:p});var h=m,f=n(8262),v=n(5706),g=n(9132);i.Z.use(g.Z);var b=new g.Z({theme:{},icons:{iconfont:"mdi"}}),y=n(9834);i.Z.use(f.og);const w=(0,f.WB)();i.Z.use(v.ZP),i.Z.config.productionTip=!0;const F=!0,D=F?"":"http://localhost:5000/";let k=new Map;k.set("yyy",{Control:y.Z,Params:"1445",SQLParams:null,data:{}});let S={message:"ого",drawer:!1,current:"yyy",openAlert:!1,alert:function(t,e){this.alertConfirm=!1,this.alertTitle=t,this.alertText=e,this.openAlert=!0},confirm:function(t,e,n){this.alertConfirm=!0,this.alertTitle=t,this.alertText=e,this.confirmAction=n,this.openAlert=!0},history:["yyy"],curhistory:0,gridHeight:function(){return document.documentElement.clientHeight-115},selectedColor:"LightGreen",dateformat:function(t,e){if(!t)return t;if(24!=t.length){let n=e.match(/0\.(0+)/),i=0;return n&&n.length>1&&(i=n[1].length),i>0?Number(t.toString()).toFixed(i):t}return e=e.replace("yyyy",t.substr(0,4)),e=e.replace("yy",t.substr(2,2)),e=e.replace("MM",t.substr(5,2)),e=e.replace("dd",t.substr(8,2)),e=e.replace("HH",t.substr(11,2)),e=e.replace("mm",t.substr(14,2)),e},resize:function(){k.forEach((t=>{t.resize&&t.resize()}))}},_=[];_.push("yyy"),i.Z.component("uni-comp",{data:function(){return{openMap:k,mainObj:S}},props:{id:{type:String,required:!0}},render:function(t){let e=k.get(this.id).Control,n=k.get(this.id).Params,i=S.current==this.id;return t(e,{props:{id:this.id,params:n,visible:i}})}}),window.addEventListener("resize",(function(){S.resize&&S.resize()}),!0),new i.Z({router:h,pinia:w,vuetify:b,render:t=>t(d)}).$mount("#app")},9834:function(t,e,n){n.d(e,{Z:function(){return H}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"100vh",maxheight:"100vh",overflow:"auto"},attrs:{hidden:!t.visible}},[n("v-dialog",{attrs:{persistent:""},model:{value:t.openFilter,callback:function(e){t.openFilter=e},expression:"openFilter"}},[n("v-card",[n("v-card-title",[t._v("Фильтровка и сортировка")]),n("div",{staticStyle:{height:"60vh",maxheight:"60vh",overflow:"auto"}},[t.load?t._e():n("v-simple-table",{attrs:{dense:"",light:""},scopedSlots:t._u([{key:"default",fn:function(){return[n("tbody",t._l(t.OpenMapData().Fcols,(function(e,i){return n("tr",{key:e.FieldName,staticStyle:{"background-color":"white"}},[n("td",{staticStyle:{"border-bottom":"none"}},[n("v-text-field",{attrs:{label:e.FieldCaption,"append-icon":t.getIcon(e)},on:{"click:append":function(n){return t.sortChangeIndex(e,i)}},model:{value:e.FindString,callback:function(n){t.$set(e,"FindString",n)},expression:"column.FindString"}})],1),n("td",{staticStyle:{"border-bottom":"none",width:"50px"}},[t._v(" "+t._s(e.SortOrder)+" "),n("span",{attrs:{hidden:""}},[t._v(t._s(t.rangSort))]),n("span",{attrs:{hidden:""}},[t._v(t._s(t.nactord))])])])})),0)]},proxy:!0}],null,!1,283315501)})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){return t.updateTab()}}},[t._v("ОК")]),n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){return t.setFilter(!1)}}},[t._v("Отмена")])],1)],1)],1),n("div",{staticStyle:{height:"100vh",maxheight:"100vh",overflow:"auto"},attrs:{hidden:"grid"!=t.mode}},[t.stateDrawer?t._e():n("v-app-bar",{attrs:{color:"primary",dark:"","max-width":"100vw",height:"65"}},[null==t.editid?n("v-app-bar-nav-icon",{on:{click:function(e){t.mainObj.drawer=!0}}}):t._e(),n("v-toolbar-title",[t._v(t._s(t.Descr))]),n("v-spacer"),t.load?t._e():n("v-text-field",{attrs:{label:"Поиск",dense:"",filled:"",rounded:"","hide-details":"","prepend-inner-icon":"mdi-magnify","single-line":""},on:{input:function(e){return t.updateTab()}},model:{value:t.OpenMapData().Fcols[t.dispIndex].FindString,callback:function(e){t.$set(t.OpenMapData().Fcols[t.dispIndex],"FindString",e)},expression:"OpenMapData().Fcols[dispIndex].FindString"}}),null!=t.editid?[n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.selectFinder(t.editid)}}},[n("v-icon",[t._v("mdi-check")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.clearFinder()}}},[n("v-icon",[t._v("mdi-window-close")])],1)]:t._e(),t._t("default"),n("v-menu",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[n("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",a,!1),i),[n("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!1,3221905750)},[n("v-list",[n("v-list-item-group",[null!=t.editid||t.load?t._e():[t.OpenMapData().DelProc?n("v-list-item",{key:"6",on:{click:function(e){return t.add()}}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-plus")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Добавить")])],1)],1):t._e(),n("v-list-item",{key:"7",on:{click:function(e){return t.edit()}}},[n("v-list-item-icon",[t.OpenMapData().EditProc?n("v-icon",[t._v("mdi-pencil")]):n("v-icon",[t._v("mdi-magnify")])],1),n("v-list-item-content",[t.OpenMapData().EditProc?n("v-list-item-title",[t._v("Редактировать")]):n("v-list-item-title",[t._v("Просмотр")])],1)],1),t.OpenMapData().DelProc?n("v-list-item",{key:"8",on:{click:function(e){return t.confirmDelete()}}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-delete")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Удалить")])],1)],1):t._e()],t.load?t._e():[n("v-list-item",{key:"1",on:{click:function(e){return t.setFilter(!0)}}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-filter-menu")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Фильтровка и сортировка")])],1)],1),n("v-list-item",{key:"2",on:{click:function(e){t.stateDrawer=!0}}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-code-tags")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Страницы")])],1)],1),n("v-list-item",{key:"0",on:{click:function(e){return t.updateTab()}}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-refresh")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Обновить")])],1)],1)],null!=t.editid||t.load?t._e():[n("v-list-item",{key:"3",on:{click:function(e){return t.csv()}}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-cloud-download")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Экспорт в CSV")])],1)],1),t.OpenMapData().KeyValue?n("v-list-item",{key:"4",on:{click:function(e){return t.openDetail()}}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-details")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Детали")])],1)],1):t._e()],t.OpenMapData().IdDeclareSet&&!t.load?n("v-list-item",{key:"5",on:{click:function(e){return t.editSetting()}}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-cog")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Параметры")])],1)],1):t._e()],2)],1)],1)],2),t.stateDrawer?n("Pagination",{attrs:{findData:t.OpenMapData()}}):t._e(),t.load?t._e():n("v-simple-table",{attrs:{dense:"","fixed-header":"",height:t.gridHeight},scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",t._l(t.OpenMapData().Fcols,(function(e){return n("th",{key:e.FieldName,staticStyle:{"background-color":"LightGrey"}},[n("br"),t._v(t._s(e.FieldCaption))])})),0)]),t.nupdate>0?n("tbody",t._l(t.OpenMapData().MainTab,(function(e,i){return n("tr",{key:i,style:{"background-color":i==t.current?t.selectedColor:"white"},on:{click:function(e){return t.handleClick(i)}}},t._l(t.OpenMapData().Fcols,(function(i){return n("td",{key:i.FieldName},[t._v(t._s(""==i.DisplayFormat?e[i.FieldName]:t.dateformat(e[i.FieldName],i.DisplayFormat)))])})),0)})),0):t._e()]},proxy:!0}],null,!1,3180409333)})],1),n("div",{staticStyle:{height:"100vh",maxheight:"100vh",overflow:"auto"},attrs:{hidden:!("edit"==t.mode||"add"==t.mode)}},[null!=t.editid||t.load?t._e():n("Editor",{attrs:{save:t.save,closeEditor:t.closeEditor,action:t.mode,findData:t.OpenMapData(),uid:t.uid,readonly:!t.OpenMapData().EditProc}})],1),n("div",{staticStyle:{height:"100vh",maxheight:"100vh",overflow:"auto"},attrs:{hidden:!("setting"==t.mode)}},[t.OpenMapData().IdDeclareSet&&!t.load?n("Editor",{attrs:{save:t.saveSetting,closeEditor:t.closeEditor,action:t.mode,findData:t.OpenMapData().Setting,uid:t.uid2}}):t._e()],1)],1)},a=[],o=n(5767),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app-bar",{attrs:{flat:"","max-width":"100vw"}},[n("span",{attrs:{hidden:""}},[t._v(t._s(t.$parent.action))]),t._v(" "+t._s(t.page()*t.nrows()+1)+" - "+t._s(Math.min((t.page()+1)*t.nrows(),t.count()))+" из "+t._s(t.count())+" "),n("v-spacer"),n("v-btn",{attrs:{icon:"",disabled:0===t.page()},on:{click:function(e){return t.$parent.onChangePage(0)}}},[n("v-icon",[t._v("mdi-page-first")])],1),n("v-btn",{attrs:{icon:"",disabled:0===t.page()},on:{click:function(e){t.$parent.onChangePage(t.page()-1)}}},[n("v-icon",[t._v("mdi-chevron-left")])],1),t._v(" "+t._s(t.page()+1)+" из "+t._s(Math.max(0,Math.ceil(t.count()/t.nrows())-1)+1)+" "),n("v-btn",{attrs:{icon:"",disabled:t.page()>=Math.ceil(t.count()/t.nrows())-1},on:{click:function(e){t.$parent.onChangePage(t.page()+1)}}},[n("v-icon",[t._v("mdi-chevron-right")])],1),n("v-btn",{attrs:{icon:"",disabled:t.page()>=Math.ceil(t.count()/t.nrows())-1},on:{click:function(e){t.$parent.onChangePage(Math.max(0,Math.ceil(t.count()/t.nrows())-1))}}},[n("v-icon",[t._v("mdi-page-last")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(e){t.$parent.stateDrawer=!1}}},[n("v-icon",[t._v("mdi-window-close")])],1)],1)},s=[],l={name:"PaginationSmart",data:()=>({rowsPerPage:30}),props:{findData:Object},methods:{OpenMapData:function(){return this.findData},count:function(){return this.OpenMapData().TotalTab?this.OpenMapData().TotalTab[0].n_total:0},page:function(){return this.OpenMapData().page?this.OpenMapData().page-1:0},nrows:function(){return this.OpenMapData().nrows?this.OpenMapData().nrows:30}}},c=l,d=n(1001),u=n(3453),p=n.n(u),m=n(8320),h=n(680),f=n(6428),v=n(3631),g=(0,d.Z)(c,r,s,!1,null,null,null),b=g.exports;p()(g,{VAppBar:m.Z,VBtn:h.Z,VIcon:f.Z,VSpacer:v.Z});var y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"100vh",maxheight:"100vh",overflow:"auto"}},[n("div",{staticStyle:{height:"100vh",maxheight:"100vh",overflow:"auto"},attrs:{hidden:"edit"!=t.mode}},[n("v-app-bar",{attrs:{color:"primary",dark:"","max-width":"100vw"}},["setting"!=t.action?n("v-app-bar-nav-icon",{on:{click:function(e){t.mainObj.drawer=!0}}}):t._e(),n("v-toolbar-title",[t._v(t._s(t.Descr()))]),n("v-spacer"),t.readonly?t._e():n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.save()}}},[n("v-icon",[t._v("mdi-check")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.closeEditor()}}},[n("v-icon",[t._v("mdi-window-close")])],1)],1),n("v-main",[n("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[t.nupdate>0&&""!=t.uid?n("tbody",[t.readonly?t._l(t.findData.Fcols,(function(e,i){return n("tr",{key:i,staticStyle:{"background-color":"white"}},[n("td",{staticStyle:{"border-bottom":"none"}},[n("v-text-field",{key:e.FieldName+t.uid,attrs:{label:e.FieldCaption,value:t.findData.WorkRow[e.FieldName],readonly:""}})],1)])})):t._l(t.findData.ReferEdit.Editors,(function(e,i){return n("tr",{key:i,staticStyle:{"background-color":"white"}},[n("td",{staticStyle:{"border-bottom":"none"}},[null==e.joinRow?n("v-text-field",{key:e.FieldName+t.uid,attrs:{label:e.FieldCaption},model:{value:t.OpenMapData().WorkRow[e.FieldName],callback:function(n){t.$set(t.OpenMapData().WorkRow,e.FieldName,n)},expression:"OpenMapData().WorkRow[column.FieldName]"}}):["Bureau.Finder"==e.joinRow.classname?n("v-text-field",{key:e.FieldName+t.uid,attrs:{label:e.FieldCaption,"append-icon":"mdi-magnify",readonly:""},on:{"click:append":function(e){return t.open(i)}},model:{value:t.OpenMapData().WorkRow[e.FieldName],callback:function(n){t.$set(t.OpenMapData().WorkRow,e.FieldName,n)},expression:"OpenMapData().WorkRow[column.FieldName]"}}):t._e(),"Bureau.GridCombo"==e.joinRow.classname?n("v-select",{key:e.FieldName+t.uid,attrs:{label:e.FieldCaption,items:e.joinRow.FindConrol.MainTab,"item-value":e.joinRow.keyField,"item-text":e.joinRow.FindConrol.DispField},on:{change:function(n){return t.sortChange(n,e)}},model:{value:t.OpenMapData().WorkRow[e.joinRow.valField],callback:function(n){t.$set(t.OpenMapData().WorkRow,e.joinRow.valField,n)},expression:"OpenMapData().WorkRow[column.joinRow.valField]"}}):t._e()]],2)])}))],2):t._e()]},proxy:!0}])})],1)],1),t.readonly?t._e():[t._l(t.findData.ReferEdit.Editors,(function(e,i){return[null!=e.joinRow?["Bureau.Finder"==e.joinRow.classname?n("Finder",{key:i,attrs:{visible:t.mode=="finder_"+i.toString(),params:e.joinRow.IdDeclare,editid:i,findData:e.joinRow.FindConrol,selectFinder:t.selectFinder,clearFinder:t.clearFinder}}):t._e()]:t._e()]}))]],2)},w=[],F={name:"EditorSmart",data:()=>({mode:"edit",mainObj:o.uW,nupdate:1}),props:{save:Function,closeEditor:Function,action:String,findData:Object,uid:String,readonly:Boolean},beforeCreate:function(){this.$options.components.Finder=n(9834).Z},methods:{OpenMapData:function(){return this.findData},Descr:function(){return"add"==this.action?"Новая запись":"edit"==this.action?this.readonly?"Просмотр":"Редактирование":"setting"==this.action?"Параметры":void 0},open:function(t){this.mode="finder_"+t.toString()},selectFinder:function(t){let e=this.findData.ReferEdit.Editors[t],n=this.findData.ReferEdit.Editors[t].joinRow.FindConrol.curRow,i=e.joinRow.FindConrol.MainTab[n];for(let a in e.joinRow.fields)this.OpenMapData().WorkRow[e.joinRow.fields[a]]=i[a];this.nupdate=this.nupdate+1,this.mode="edit"},sortChange:function(t,e){e.joinRow.FindConrol.MainTab.map((n=>{if(n[e.joinRow.keyField]==t)for(let t in e.joinRow.fields)this.OpenMapData().WorkRow[e.joinRow.fields[t]]=n[t]})),this.nupdate=this.nupdate+1},clearFinder:function(){this.mode="edit"},textChange:function(t,e){this.OpenMapData().WorkRow[e]=t}}},D=F,k=n(5206),S=n(7877),_=n(5340),O=n(3568),M=n(5978),R=n(7921),T=(0,d.Z)(D,y,w,!1,null,null,null),x=T.exports;p()(T,{VAppBar:m.Z,VAppBarNavIcon:k.Z,VBtn:h.Z,VIcon:f.Z,VMain:S.Z,VSelect:_.Z,VSimpleTable:O.Z,VSpacer:v.Z,VTextField:M.Z,VToolbarTitle:R.qW});let C={name:"FinderSmart",components:{Pagination:b,Editor:x},data:()=>({mainObj:o.uW,openMap:o.M8,load:!0,mode:"grid",Descr:"Загрузка...",current:0,stateDrawer:!1,action:1,nupdate:1,nadd:1,nactord:1,items:["Нет","ASC","DESC"],rangSort:0,uid:"xx",uid2:"yy",selectedColor:"LightGreen",openFilter:!1,dispIndex:0}),props:{visible:{type:Boolean,required:!0},id:String,params:String,editid:Number,findData:Object,selectFinder:Function,clearFinder:Function},computed:{gridHeight:function(){return document.documentElement.clientHeight-65},finderRowStyle:function(){}},methods:{sortChange:function(t,e){let n=0,i=this.OpenMapData().Fcols;i.map(((t,i)=>{"Нет"==t.Sort&&(t.SortOrder=null),i!=e&&t.SortOrder&&t.SortOrder>n&&(n=t.SortOrder)})),i[e].SortOrder=n+1,this.rangSort=n+1,this.nactord=this.nactord+1},sortChangeIndex:function(t,e){"ASC"==t.Sort?t.Sort="DESC":"DESC"==t.Sort?t.Sort="Нет":t.Sort="ASC",this.sortChange(null,e)},getIcon:function(t){return"ASC"==t.Sort?"mdi-arrow-down":"DESC"==t.Sort?"mdi-arrow-up":"mdi-sort"},dateformat:function(t,e){if(!t)return t;if(24!=t.length){let n=e.match(/0\.(0+)/),i=0;return n&&n.length>1&&(i=n[1].length),i>0?Number(t.toString()).toFixed(i):t}return e=e.replace("yyyy",t.substr(0,4)),e=e.replace("yy",t.substr(2,2)),e=e.replace("MM",t.substr(5,2)),e=e.replace("dd",t.substr(8,2)),e=e.replace("HH",t.substr(11,2)),e=e.replace("mm",t.substr(14,2)),e},OpenMapData:function(){return null!=this.id?o.M8.get(this.id).data:this.findData},OpenMapId:function(){return o.M8.get(this.id)},setLoad:function(t){this.load=t},setFilter:function(t){this.openFilter=t},handleClick:function(t){this.OpenMapData().curRow==t?(this.current=t,null==this.editid?this.OpenMapData().EditProc?this.edit():this.OpenMapData().KeyValue?this.openDetail():this.edit():this.selectFinder(this.editid)):(this.OpenMapData().curRow=t,this.current=t)},openDetail:function(){let t=this.OpenMapData();if(null==t.curRow)return;let e,n,i,a=t.MainTab[t.curRow],r={};if(a["iddeclare"]&&a["keyf"]){let t=a["keyf"],o=a["dispfield"],s=a["iddeclare"];e=a[t],r[t]=e,n=s,i=a[o]}else e=a[t.KeyF],r[t.KeyF]=e,n=t.KeyValue,i=a[t.DispField];let s={Control:C,Params:n,TextParams:r,title:i,data:{}},l=this.id+"_"+a[t.KeyF];null==o.M8.get(l)&&(o.M8.set(l,s),o.RX.push(l)),o.uW.current=l,o.uW.curhistory=o.uW.curhistory+1,o.uW.history.splice(o.uW.curhistory,o.uW.history.length,l)},csv:function(){const t=o.FH+"React/csv";let e=new FormData,n=this.OpenMapData();const i=this.params;e.append("id",i),e.append("Fc",JSON.stringify(n.Fcols)),n.SQLParams&&e.append("SQLParams",JSON.stringify(n.SQLParams)),n.TextParams&&e.append("TextParams",JSON.stringify(n.TextParams)),fetch(t,{method:"POST",mode:o.W6?"no-cors":"cors",cache:"no-cache",credentials:o.W6?"include":"omit",body:e}).then((t=>t.blob())).then((t=>{let e=document.createElement("a");e.href=URL.createObjectURL(t),e.setAttribute("download","data.csv"),e.click()}))},loadFile:function(){let t=this.OpenMapData();if(null==t.curRow)return;let e=t.MainTab[t.curRow];const n=this.params;let i="F"+n+"_"+e[t.KeyF],a=t.Descr+", "+e[t.DispField],r=o.FH+"Docfiles/dir?id="+i+"/&caption="+a;this.$refs.fileLink2.href=r,this.$refs.fileLink2.click()},confirmDelete:function(){let t=this.OpenMapData();if(null==t.curRow)return;let e=t.MainTab[t.curRow],n=e[t.DispField];o.uW.confirm(this.Descr,"Удалить запись '"+n+"'?",this.rowDelete)},rowDelete:async function(){let t=this.OpenMapData(),e={};e[t.KeyF]=t.MainTab[t.curRow][t.KeyF],t.DelProc.toLowerCase().indexOf("_del_1")>-1&&(e["AUDTUSER"]=t.Account);const n=o.FH+"React/exec";let i=new FormData;i.append("EditProc",t.DelProc),i.append("SQLParams",JSON.stringify(e)),i.append("KeyF",t.KeyF);const a=await fetch(n,{method:"POST",mode:o.W6?"no-cors":"cors",cache:"no-cache",credentials:o.W6?"include":"omit",body:i}),r=await a.json();"OK"==r.message||"Invalid storage type: DBNull."==r.message?(t.MainTab.splice(t.curRow,1),this.nupdate=this.nupdate+1):o.uW.alert("Ошибка",r.message)},onChangePage:function(t){this.action=this.action+1,this.OpenMapData().page=t+1,this.updateTab()},updateTab:async function(){const t=o.FH+"React/FinderStart";let e=new FormData,n=this.OpenMapData();const i=this.params;e.append("id",i),e.append("mode","data"),e.append("page",n.page.toString()),e.append("Fc",JSON.stringify(n.Fcols)),n.SQLParams&&e.append("SQLParams",JSON.stringify(n.SQLParams)),n.TextParams&&e.append("TextParams",JSON.stringify(n.TextParams));const a=await fetch(t,{method:"POST",mode:o.W6?"no-cors":"cors",cache:"no-cache",credentials:o.W6?"include":"omit",body:e}),r=await a.json();r.Error?o.uW.alert("Ошибка",r.Error):(n.MainTab=r.MainTab,n.TotalTab=r.TotalTab,n.page=r.page,this.mode,this.mode="grid",this.nupdate=this.nupdate+1,this.openFilter=!1)},saveSetting:function(){let t=this.OpenMapData().Setting,e=t.MainTab[0];t.ColumnTab.map((n=>{e[n]=t.WorkRow[n]}));let n=this.OpenMapData();t.ReferEdit.SaveFieldList.map((e=>{n.SQLParams["@"+e]=t.MainTab[0][e]})),this.updateTab()},save:async function(){let t=this.OpenMapData();for(let o in t.DefaultValues)t.WorkRow[o]=t.DefaultValues[o];for(let o in t.TextParams)t.WorkRow[o]=t.TextParams[o];let e={};t.ReferEdit.SaveFieldList.map((n=>{e[n]=t.WorkRow[n]}));const n=o.FH+"React/exec";let i=new FormData;i.append("EditProc",t.EditProc),i.append("SQLParams",JSON.stringify(e)),i.append("KeyF",t.KeyF);const a=await fetch(n,{method:"POST",mode:o.W6?"no-cors":"cors",cache:"no-cache",credentials:o.W6?"include":"omit",body:i}),r=await a.json();if("OK"!=r.message)return void o.uW.alert("Ошибка",r.message);1==r.ColumnTab.length?t.WorkRow[t.KeyF]=r.MainTab[0][r.ColumnTab[0]]:r.ColumnTab.map((e=>{t.WorkRow[e]=r.MainTab[0][e]}));let s={};if("edit"==this.mode){let e=t.curRow;s=t.MainTab[e]}t.ColumnTab.map((e=>{s[e]=t.WorkRow[e]})),"add"==this.mode&&t.MainTab.push(s),this.mode="grid",this.nupdate=this.nupdate+1},closeEditor:function(){this.mode="grid"},add:function(){let t=this.OpenMapData();null==t.WorkRow&&(t.WorkRow={}),t.ColumnTab.map((e=>{t.WorkRow[e]=""})),this.nadd=this.nadd+1,this.uid="uid"+this.nadd.toString(),this.mode="add"},edit:function(){let t=this.OpenMapData();null==t.WorkRow&&(t.WorkRow={});let e=t.curRow,n=t.MainTab[e];t.ColumnTab.map((e=>{t.WorkRow[e]=null==n[e]?"":n[e]})),t.Fcols.map((e=>{""!=e.DisplayFormat&&(t.WorkRow[e.FieldName]=this.dateformat(t.WorkRow[e.FieldName],e.DisplayFormat))})),this.nadd=this.nadd+1,this.uid="uid"+this.nadd.toString(),this.mode="edit"},editSetting:function(){let t=this.OpenMapData().Setting;t.WorkRow={};let e=t.MainTab[0];t.ColumnTab.map((n=>{t.WorkRow[n]=null==e[n]?"":e[n]})),t.Fcols.map((e=>{""!=e.DisplayFormat&&(t.WorkRow[e.FieldName]=this.dateformat(t.WorkRow[e.FieldName],e.DisplayFormat))})),this.nadd=this.nadd+1,this.uid2="uid2"+this.nadd.toString(),this.mode="setting"}},mounted:async function(){let t=this.OpenMapData,e=this.OpenMapId,n=this.setLoad;const i=this.editid,a=this.params;if(null!=i){t().curRow=0,this.Descr=t().Descr+" (выбор)";let e=t();return e.Fcols.map(((t,n)=>{t.FieldName==e.DispField&&(this.dispIndex=n)})),void n(!1)}const r=e();{const t=o.FH+"React/FinderStart";let e=new FormData;e.append("id",a),r.SQLParams&&e.append("SQLParams",JSON.stringify(r.SQLParams)),r.TextParams&&e.append("TextParams",JSON.stringify(r.TextParams));const i=await fetch(t,{method:"POST",mode:o.W6?"no-cors":"cors",cache:"no-cache",credentials:o.W6?"include":"omit",body:e}),s=await i.json();if(s.Error)return void o.uW.alert("Ошибка",s.Error);s.curRow=0,s.WorkRow={},s.ColumnTab.map((t=>{s.WorkRow[t]=""})),r.data=s,r.data.Fcols.map(((t,e)=>{t.FieldName==r.data.DispField&&(this.dispIndex=e)})),this.Descr=r.data.Descr,r.title&&(this.Descr=this.Descr+" ("+r.title+")"),this.current=r.data.curRow,n(!1)}}};var P=C,W=P,E=n(3237),j=n(7118),Z=n(4497),N=n(6816),V=n(7620),L=n(1317),I=n(3249),A=n(459),B=n(6768),$=(0,d.Z)(W,i,a,!1,null,"cf8104cc",null),H=$.exports;p()($,{VAppBar:m.Z,VAppBarNavIcon:k.Z,VBtn:h.Z,VCard:E.Z,VCardActions:j.h7,VCardTitle:j.EB,VDialog:Z.Z,VIcon:f.Z,VList:N.Z,VListItem:V.Z,VListItemContent:L.km,VListItemGroup:I.Z,VListItemIcon:A.Z,VListItemTitle:L.V9,VMenu:B.Z,VSimpleTable:O.Z,VSpacer:v.Z,VTextField:M.Z,VToolbarTitle:R.qW})}},e={};function n(i){var a=e[i];if(void 0!==a)return a.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.m=t,function(){var t=[];n.O=function(e,i,a,o){if(!i){var r=1/0;for(d=0;d<t.length;d++){i=t[d][0],a=t[d][1],o=t[d][2];for(var s=!0,l=0;l<i.length;l++)(!1&o||r>=o)&&Object.keys(n.O).every((function(t){return n.O[t](i[l])}))?i.splice(l--,1):(s=!1,o<r&&(r=o));if(s){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[i,a,o]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,i){return n.f[i](t,e),e}),[]))}}(),function(){n.u=function(t){return"js/"+t+"."+{23:"44a7dafa",34:"19928b91",56:"d5c99e9c",94:"49751413",167:"073220ca",233:"838012cc",241:"44e79853",257:"8cb240cc",377:"2f49bc35",524:"213c65c7",565:"81b333f6",857:"33aeb18b"}[t]+".js"}}(),function(){n.miniCssF=function(t){return"css/"+t+"."+{23:"081eaa08",34:"081eaa08",94:"081eaa08",167:"e6594ce6",233:"e6594ce6",241:"081eaa08",257:"e6594ce6",524:"081eaa08",565:"46a7376c",857:"081eaa08"}[t]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="vue2a_test:";n.l=function(i,a,o,r){if(t[i])t[i].push(a);else{var s,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==e+o){s=u;break}}s||(l=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",e+o),s.src=i),t[i]=[a];var p=function(e,n){s.onerror=s.onload=null,clearTimeout(m);var a=t[i];if(delete t[i],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(t){return t(n)})),e)return e(n)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var t=function(t,e,n,i){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css";var o=function(o){if(a.onerror=a.onload=null,"load"===o.type)n();else{var r=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.href||e,l=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=s,a.parentNode.removeChild(a),i(l)}};return a.onerror=a.onload=o,a.href=e,document.head.appendChild(a),a},e=function(t,e){for(var n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var a=n[i],o=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(o===t||o===e))return a}var r=document.getElementsByTagName("style");for(i=0;i<r.length;i++){a=r[i],o=a.getAttribute("data-href");if(o===t||o===e)return a}},i=function(i){return new Promise((function(a,o){var r=n.miniCssF(i),s=n.p+r;if(e(r,s))return a();t(i,s,a,o)}))},a={143:0};n.f.miniCss=function(t,e){var n={23:1,34:1,94:1,167:1,233:1,241:1,257:1,524:1,565:1,857:1};a[t]?e.push(a[t]):0!==a[t]&&n[t]&&e.push(a[t]=i(t).then((function(){a[t]=0}),(function(e){throw delete a[t],e})))}}(),function(){var t={143:0};n.f.j=function(e,i){var a=n.o(t,e)?t[e]:void 0;if(0!==a)if(a)i.push(a[2]);else{var o=new Promise((function(n,i){a=t[e]=[n,i]}));i.push(a[2]=o);var r=n.p+n.u(e),s=new Error,l=function(i){if(n.o(t,e)&&(a=t[e],0!==a&&(t[e]=void 0),a)){var o=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;s.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",s.name="ChunkLoadError",s.type=o,s.request=r,a[1](s)}};n.l(r,l,"chunk-"+e,e)}},n.O.j=function(e){return 0===t[e]};var e=function(e,i){var a,o,r=i[0],s=i[1],l=i[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(l)var d=l(n)}for(e&&e(i);c<r.length;c++)o=r[c],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(d)},i=self["webpackChunkvue2a_test"]=self["webpackChunkvue2a_test"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(5767)}));i=n.O(i)})();
//# sourceMappingURL=app.5cae1a23.js.map