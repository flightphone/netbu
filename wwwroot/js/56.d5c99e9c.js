"use strict";(self["webpackChunkvue2a_test"]=self["webpackChunkvue2a_test"]||[]).push([[56],{615:function(t,e,a){a.d(e,{h:function(){return i}});var n=a(8262);const i=(0,n.Q_)("main",{state:()=>({count:10,drawer:!1,openFilter:!1,menuSelectedItem:0,menuItems:[],menuVisible:!0}),getters:{double:t=>2*t.count},actions:{increment(){this.count++},clearItem(){this.menuItems=[],this.menuVisible=!1},addItem(t){this.menuItems=[],t.map((t=>{this.menuItems.push(t)})),this.menuSelectedItem=0,this.menuVisible=!0}}})},4056:function(t,e,a){a.r(e),a.d(e,{default:function(){return Z}});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("v-dialog",{attrs:{persistent:""},model:{value:t.store.openFilter,callback:function(e){t.$set(t.store,"openFilter",e)},expression:"store.openFilter"}},[a("v-card",[a("v-card-title",[t._v("Фильтровка и сортировка")]),a("div",{staticStyle:{height:"60vh",maxheight:"60vh",overflow:"auto"}},[t.load?t._e():a("v-simple-table",{attrs:{dense:"",light:""},scopedSlots:t._u([{key:"default",fn:function(){return[a("tbody",t._l(t.OpenMapData().Fcols,(function(e,n){return a("tr",{key:e.FieldName,staticStyle:{"background-color":"white"}},[a("td",{staticStyle:{"border-bottom":"none"}},[a("v-text-field",{attrs:{label:e.FieldCaption,"append-icon":t.getIcon(e)},on:{"click:append":function(a){return t.sortChangeIndex(e,n)}},model:{value:e.FindString,callback:function(a){t.$set(e,"FindString",a)},expression:"column.FindString"}})],1),a("td",{staticStyle:{"border-bottom":"none",width:"50px"}},[t._v(" "+t._s(e.SortOrder)+" "),a("span",{attrs:{hidden:""}},[t._v(t._s(t.rangSort))]),a("span",{attrs:{hidden:""}},[t._v(t._s(t.nactord))])])])})),0)]},proxy:!0}],null,!1,283315501)})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){return t.updateTab()}}},[t._v("ОК")]),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.store.openFilter=!1}}},[t._v("Отмена")])],1)],1)],1),a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Справочник контактов")]),t.load?a("v-toolbar-title",[t._v("(загрузка...)")]):t._e(),a("v-spacer"),a("v-spacer"),a("v-spacer"),t.load?t._e():a("v-text-field",{attrs:{label:"Поиск",dense:"",filled:"",rounded:"","hide-details":"","prepend-inner-icon":"mdi-magnify","single-line":""},on:{input:function(e){return t.updateTab()}},model:{value:t.OpenMapData().Fcols[3].FindString,callback:function(e){t.$set(t.OpenMapData().Fcols[3],"FindString",e)},expression:"OpenMapData().Fcols[3].FindString"}})],1),t.load?t._e():a("v-simple-table",{attrs:{light:""},scopedSlots:t._u([{key:"default",fn:function(){return[a("tbody",t._l(t.OpenMapData().MainTab,(function(e,n){return a("tr",{key:n},[a("td",[a("v-list-item-avatar",[a("v-img",{attrs:{src:t.avatar(n)}})],1)],1),a("td",[a("v-card",{staticClass:"mx-auto",attrs:{tile:"",flat:"","max-width":"400"}},[a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",[a("v-list-item-subtitle",[t._v(t._s(e["Должность"]))]),a("v-list-item-title",{staticClass:"caption"},[t._v(t._s(e["ПолнИмяСотрудника"]))])],1)],1),a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",[a("v-list-item-subtitle",[t._v("Табельный номер")]),a("v-list-item-title",{staticClass:"caption"},[t._v(t._s(e["ТабN"]))])],1)],1)],1)],1),a("td",[a("v-card",{staticClass:"mx-auto",attrs:{tile:"",flat:"","max-width":"300"}},[a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",[a("v-list-item-subtitle",[t._v("Компания")]),a("v-list-item-title",{staticClass:"caption"},[t._v(t._s(e["Организация"]))])],1)],1),a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",[a("v-list-item-subtitle",[t._v("Подразделение")]),a("v-list-item-title",{staticClass:"caption"},[t._v(t._s(e["Подразделение"]))])],1)],1)],1)],1),a("td",[a("v-card",{staticClass:"mx-auto",attrs:{tile:"",flat:"","max-width":"300"}},[a("v-list-item",{attrs:{dense:""}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-home")])],1),a("v-list-item-content",[a("v-list-item-subtitle",[t._v(t._s(e["ОфисСотрудника"]))])],1)],1),a("v-list-item",{attrs:{dense:""}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-phone")])],1),a("v-list-item-content",[a("v-list-item-subtitle",[t._v(t._s(e["CorpMobile"]))])],1)],1),a("v-list-item",{attrs:{dense:""}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-email-outline")])],1),a("v-list-item-content",[a("v-list-item-subtitle",[t._v(t._s(e["Email"]))])],1)],1)],1)],1)])})),0)]},proxy:!0}],null,!1,143399415)}),t.load?t._e():a("Pagination",{attrs:{findData:t.OpenMapData()}})],1)},i=[],r=a(615),s=a(5767),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-toolbar",{attrs:{flat:"",dense:""}},[a("span",{attrs:{hidden:""}},[t._v(t._s(t.$parent.action))]),a("v-btn",{attrs:{icon:"",disabled:0===t.page()},on:{click:function(e){return t.$parent.onChangePage(0)}}},[a("v-icon",[t._v("mdi-page-first")])],1),a("v-btn",{attrs:{icon:"",disabled:0===t.page()},on:{click:function(e){t.$parent.onChangePage(t.page()-1)}}},[a("v-icon",[t._v("mdi-chevron-left")])],1),t._v(" "+t._s(t.page()+1)+" из "+t._s(Math.max(0,Math.ceil(t.count()/t.nrows())-1)+1)+" "),a("v-btn",{attrs:{icon:"",disabled:t.page()>=Math.ceil(t.count()/t.nrows())-1},on:{click:function(e){t.$parent.onChangePage(t.page()+1)}}},[a("v-icon",[t._v("mdi-chevron-right")])],1),a("v-btn",{attrs:{icon:"",disabled:t.page()>=Math.ceil(t.count()/t.nrows())-1},on:{click:function(e){t.$parent.onChangePage(Math.max(0,Math.ceil(t.count()/t.nrows())-1))}}},[a("v-icon",[t._v("mdi-page-last")])],1),a("v-spacer"),t._v(" "+t._s(t.page()*t.nrows()+1)+" - "+t._s(Math.min((t.page()+1)*t.nrows(),t.count()))+" из "+t._s(t.count())+" ")],1)},l=[],c={name:"PaginationTool",data:()=>({rowsPerPage:30}),props:{findData:Object},methods:{OpenMapData:function(){return this.findData},count:function(){return this.OpenMapData().TotalTab?this.OpenMapData().TotalTab[0].n_total:0},page:function(){return this.OpenMapData().page?this.OpenMapData().page-1:0},nrows:function(){return this.OpenMapData().nrows?this.OpenMapData().nrows:30}}},d=c,p=a(1001),u=a(3453),m=a.n(u),v=a(680),h=a(6428),g=a(3631),b=a(6656),f=(0,p.Z)(d,o,l,!1,null,null,null),_=f.exports;m()(f,{VBtn:v.Z,VIcon:h.Z,VSpacer:g.Z,VToolbar:b.Z});var S={name:"UserPage",components:{Pagination:_},setup(){const t=(0,r.h)();return{store:t}},data:()=>({load:!0,tableData:{},updating:!1,action:1,stateDrawer:!1,rangSort:0,nactord:1}),methods:{sortChange:function(t,e){let a=0,n=this.OpenMapData().Fcols;n.map(((t,n)=>{"Нет"==t.Sort&&(t.SortOrder=null),n!=e&&t.SortOrder&&t.SortOrder>a&&(a=t.SortOrder)})),n[e].SortOrder=a+1,this.rangSort=a+1,this.nactord=this.nactord+1},sortChangeIndex:function(t,e){"ASC"==t.Sort?t.Sort="DESC":"DESC"==t.Sort?t.Sort="Нет":t.Sort="ASC",this.sortChange(null,e)},getIcon:function(t){return"ASC"==t.Sort?"mdi-arrow-down":"DESC"==t.Sort?"mdi-arrow-up":"mdi-sort"},OpenMapData:function(){return this.tableData},avatar:function(t){return"https://randomuser.me/api/portraits/women/"+t.toString()+".jpg"},dateformat:function(t,e){if(!t)return t;if(24!=t.length){let a=e.match(/0\.(0+)/),n=0;return a&&a.length>1&&(n=a[1].length),n>0?Number(t.toString()).toFixed(n):t}return e=e.replace("yyyy",t.substr(0,4)),e=e.replace("yy",t.substr(2,2)),e=e.replace("MM",t.substr(5,2)),e=e.replace("dd",t.substr(8,2)),e=e.replace("HH",t.substr(11,2)),e=e.replace("mm",t.substr(14,2)),e},onChangePage:function(t){this.action=this.action+1,this.OpenMapData().page=t+1,this.updateTab()},updateTab:async function(){const t=s.FH+"React/FinderStart";let e=new FormData,a=this.OpenMapData();e.append("id",1467),e.append("mode","data"),e.append("page",a.page.toString()),e.append("Fc",JSON.stringify(a.Fcols)),a.SQLParams&&e.append("SQLParams",JSON.stringify(a.SQLParams)),a.TextParams&&e.append("TextParams",JSON.stringify(a.TextParams));const n=await fetch(t,{method:"POST",mode:s.W6?"no-cors":"cors",cache:"no-cache",credentials:s.W6?"include":"omit",body:e}),i=await n.json();i.Error?alert(i.Error):(a.MainTab=i.MainTab,a.TotalTab=i.TotalTab,a.page=i.page,this.store.openFilter=!1)}},computed:{gridHeight:function(){return document.documentElement.clientHeight-120}},mounted:async function(){const t=s.FH+"React/FinderStart";let e=new FormData;e.append("id",1467),e.append("mode","data");const a=await fetch(t,{method:"POST",mode:s.W6?"no-cors":"cors",cache:"no-cache",credentials:s.W6?"include":"omit",body:e});if(this.tableData=await a.json(),this.tableData.Error)alert(this.tableData.Error);else{const t=[{text:"Фильтры",icon:"mdi-filter-menu",action:()=>{this.store.openFilter=!0}}];this.store.addItem(t),this.load=!1}}},D=S,w=a(3237),C=a(7118),F=a(4497),M=a(7047),x=a(7620),O=a(5457),T=a(1317),y=a(459),V=a(3568),I=a(5978),k=a(7921),P=(0,p.Z)(D,n,i,!1,null,null,null),Z=P.exports;m()(P,{VBtn:v.Z,VCard:w.Z,VCardActions:C.h7,VCardTitle:C.EB,VDialog:F.Z,VIcon:h.Z,VImg:M.Z,VListItem:x.Z,VListItemAvatar:O.Z,VListItemContent:T.km,VListItemIcon:y.Z,VListItemSubtitle:T.oZ,VListItemTitle:T.V9,VSimpleTable:V.Z,VSpacer:g.Z,VTextField:I.Z,VToolbar:b.Z,VToolbarTitle:k.qW})}}]);
//# sourceMappingURL=56.d5c99e9c.js.map